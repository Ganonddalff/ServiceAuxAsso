@using System.Security.Claims
@model System.Collections.Generic.List<AssoFlex.Models.Association>

@{
    ViewBag.Title = "Nos Association";
    Layout = "_Layout";
}

<h2 class="page-section-heading text-center mb-0">Nos Associations</h2>
<form id="form"> 
  <input type="search" id="query" name="q" placeholder="Search...">
  <button>Search</button>
</form>
<div class="row justify-content-start">
    @foreach (var asso in Model)
    {
        <div class="card col-4 m-5" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title">@asso.Nom</h5>
                <h6 class="card-subtitle">@asso.NumSiret</h6>
                <h6 class="card-subtitle">@asso.DateInscription</h6>
                <p class="card-text">@asso.Description</p>
                <a href=@Url.Action("DetailsAssociation", new {id=@asso.Id}) class="btn btn-outline-primary">Voir Détails</a>
                @if (User.Identity.IsAuthenticated)
                {
                    <a href=@Url.Action("AddAdhesion", "Association", new {idAsso=@asso.Id, idUser=User.FindFirst(ClaimTypes.NameIdentifier).Value}) class="btn btn-primary">Adhérer</a>
                }
                else
                {
                    <a href=@Url.Action("Index", "Login") class="btn btn-primary">Adhérer</a>
                }
            </div>
        </div>
    }
</div>

@section Scripts
{
    
}
