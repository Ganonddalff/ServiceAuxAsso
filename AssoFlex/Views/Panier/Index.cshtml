@using System.Globalization
@model AssoFlex.ViewModels.LayoutModelView
@{
    ViewBag.Title = "Mon Panier";
    Layout = "_Layout";
}
<div class="container">
    <div>
        <h3>MON PANIER</h3>
    </div>
    <table id="cart" class="table table-hover table-condensed">
        <thead>
        <tr>
            <th style="width:50%">Produit</th>
            <th style="width:10%">Prix</th>
            <th style="width:8%">Quantité</th>
            <th style="width:22%" class="text-center">Sous-total</th>
            <th style="width:10%"></th>
        </tr>
        </thead>
        <tbody>
        @{
            if (Model.Panier.ArticlesPanier != null)
            {
                foreach (var produit in Model.Panier.ArticlesPanier)
                {
                    <tr>
                        <td data-th="Product">
                            <div class="row">
                                <div class="col-sm-2 hidden-xs"><img src="" alt="..." class="img-responsive"/></div> @*http://placehold.it/100x100*@
                                <div class="col-sm-10">
                                    <h4 class="nomargin">@produit.ProduitNom (@produit.TypeDeCommande)</h4>
                                    <p></p>
                                </div>
                            </div>
                        </td>
                        @if (@produit.TypeDeCommande != "Crowdfunding")
                        {
                            <td data-th="Price">@produit.MontantUnitaire</td>
                        }
                        else
                        {
                            <td data-th="Price">
                                <input type="number" class="form-control text-center" value=@produit.MontantUnitaire.ToString(CultureInfo.CurrentCulture)>
                            </td>
                        }
                        @if (@produit.TypeDeCommande != "Evenement")
                        {
                            <td data-th="Quantity">@produit.Quantite</td>
                        }
                        else
                        {
                            <td data-th="Quantity">
                                <input type="number" class="form-control text-center" value=@produit.Quantite.ToString()>
                            </td>
                        }
                        <td data-th="Subtotal" class="subtotal text-center">1.99€</td>
                        <td class="actions" data-th="">
                            <button class="btn btn-info btn-sm"><i class="fa fa-refresh"></i></button>
                            <button class="btn btn-danger btn-sm"><i class="fa fa-trash-o"></i></button>
                        </td>
                    </tr>
                }
            }
        }
        </tbody>
        <tfoot>
        <tr>
            <td></td>
            <td colspan="2" class="hidden-xs"></td>
            <td class="hidden-xs text-center"><strong>Total 1.99€</strong></td>
            <td><a href=@Url.Action("Index","Checkout") class="btn btn-success btn-block">Payer<i class="fa fa-angle-right"></i></a></td>
        </tr>
        </tfoot>
    </table>
</div>

@section Scripts
{
    <script>
      /*For total*/
      $(document).ready(function() {
        
        $(".checkout").on("text", ".montant", function() {
          
          var montant = +$(this).val();
          $("#total").text( montant + " €");
        })
      
        var $buttonPlus = $('.increase-btn');
        var $buttonMin = $('.decrease-btn');
        var $montant = $('.montant');
        
        /*For plus and minus buttons*/
        $buttonPlus.click(function() {
          $montant.val(parseInt($montant.val()) + 10).trigger('input');
        });
        
        $buttonMin.click(function() {
          $montant.val(Math.max(parseInt($montant.val()) - 10, 0)).trigger('input');
        });
      })
      </script>
}
@*@Html.TextBoxFor(Model => Model.ContributionViewModel.Montant, new {@class = "form-control montant", type = "text"})*@